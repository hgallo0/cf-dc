node {
  def app

  stage('clear work space'){
    cleanWs()
  }
  stage('clone repo') {
    git credentialsId: 'githgallo', url: 'https://github.com/hgallo0/cf-dc.git'
  }
  stage ('Build') {
    dir('./dc') {
//         sh 'mvn -Dmaven.test.failure.ignore=true install' 
         sh 'mvn package' 
    }
  }
  stage('Results') {
      archive 'target/*.jar'
  }
  stage('UPload to Nexus') {
    nexusArtifactUploader artifacts: [[artifactId: 'dc', classifier: 'app', file: 'target/*.jar', type: 'jar']], credentialsId: 'nexus', groupId: 'com.acme.app', nexusUrl: 'http://10.100.11.164:8081', nexusVersion: 'nexus3', protocol: 'http', repository: 'hgallotest', version: '1.0.0'
  }
}
